---js
{
  pagination: {
    data: "getContentfulNotes",
    size: 1,
    alias: "note",
  },
  layout: "layouts/base.njk",
  eleventyComputed: {
    permalink: (data) => {
      if (data.note && data.note.noteTitle && data.note.datePublished) {
        const slug = String(data.note.noteTitle)
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/^-+|-+$/g, '');
        const datePart = new Date(data.note.datePublished).toISOString().split('T')[0];
        return `/notes/${datePart}-${slug}/index.html`;
      }
      return false;
    },
  },
  tags: ["notes"],
}
---

      <article class="w-full max-w-7xl mx-auto">
        <!-- Page meta section -->
        <section class="mb-16 text-center">
            <!-- Page title -->
            <h1 class="font-serif text-4xl leading-tight font-medium md:text-5xl lg:text-6xl mb-6 text-left sm:text-center">{{ note.noteTitle }}</h1>
        </section>

        <section class="flex justify-center">
            <div class="prose max-w-prose w-full">
              {% if note.authorCommentary %}
              <div class="prose mb-4">{{ note.authorCommentary | safe }}</div>
              {% endif %}
              {% if note.externalLink %}

              <div class="mt-6 space-y-12 not-prose">
                <div class="mt-4">
                  <a class="group inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm 
                          !text-white bg-red-500 hover:bg-red-600 active:bg-red-700 
                          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 
                          transition-colors duration-200"
                    href="{{ note.externalLink }}" rel="noopener noreferrer" target="_blank">
                    Visit '{{ note.noteTitle }}'
                    <span class="ml-2 inline-flex">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                          stroke-width="1.5" stroke="currentColor" 
                          class="size-5 text-white transform transition-transform duration-200 ease-in-out group-hover:translate-x-1">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                      </svg>
                    </span>
                  </a>
                </div>
              </div>

              {% endif %}
              {% if note.datePublished %}
              <div class="mt-8 pt-2 border-t border-gray-200 text-gray-500 text-sm">
                <div class="flex items-center gap-2 text-s text-muted-foreground">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                      class="w-[1em] h-[1em] shrink-0" preserveAspectRatio="xMidYMid meet">
                    <!-- crimson bands -->
                    <path class="fill-[var(--color-vividcrimson)]" d="M -0.5,-0.5 C 170.167,-0.5 340.833,-0.5 511.5,-0.5C 511.5,52.1667 511.5,104.833 511.5,157.5C 426.124,111.568 340.791,65.2351 255.5,18.5C 170.405,64.9257 85.0713,110.926 -0.5,156.5C -0.5,104.167 -0.5,51.8333 -0.5,-0.5 Z"/>
                    <path class="fill-[var(--color-vividcrimson)]" d="M 511.5,223.5 C 511.5,245.167 511.5,266.833 511.5,288.5C 426.094,242.466 340.76,196.466 255.5,150.5C 169.795,196.016 84.4612,242.016 -0.5,288.5C -0.5,266.5 -0.5,244.5 -0.5,222.5C 84.7531,176.871 170.086,131.204 255.5,85.5C 341.079,130.958 426.412,176.958 511.5,223.5 Z"/>
                    <path class="fill-[var(--color-vividcrimson)]" d="M 511.5,354.5 C 511.5,376.167 511.5,397.833 511.5,419.5C 426.03,373.437 340.697,327.437 255.5,281.5C 170.177,327.495 84.8432,373.495 -0.5,419.5C -0.5,397.833 -0.5,376.167 -0.5,354.5C 84.5478,308.154 169.881,262.154 255.5,216.5C 340.697,262.437 426.03,308.437 511.5,354.5 Z"/>
                    <path class="fill-[var(--color-vividcrimson)]" d="M 511.5,485.5 C 511.5,494.167 511.5,502.833 511.5,511.5C 340.833,511.5 170.167,511.5 -0.5,511.5C -0.5,502.833 -0.5,494.167 -0.5,485.5C 84.8748,439.481 170.208,393.481 255.5,347.5C 340.572,393.887 425.906,439.887 511.5,485.5 Z"/>
                    <!-- white bands -->
                    <path class="fill-[var(--color-background)]" d="M 511.5,157.5 C 511.5,179.5 511.5,201.5 511.5,223.5C 426.412,176.958 341.079,130.958 255.5,85.5C 170.086,131.204 84.7531,176.871 -0.5,222.5C -0.5,200.5 -0.5,178.5 -0.5,156.5C 85.0713,110.926 170.405,64.9257 255.5,18.5C 340.791,65.2351 426.124,111.568 511.5,157.5 Z"/>
                    <path class="fill-[var(--color-background)]" d="M 511.5,288.5 C 511.5,310.5 511.5,332.5 511.5,354.5C 426.03,308.437 340.697,262.437 255.5,216.5C 169.881,262.154 84.5478,308.154 -0.5,354.5C -0.5,332.5 -0.5,310.5 -0.5,288.5C 84.4612,242.016 169.795,196.016 255.5,150.5C 340.76,196.466 426.094,242.466 511.5,288.5 Z"/>
                    <path class="fill-[var(--color-background)]" d="M 511.5,419.5 C 511.5,441.5 511.5,463.5 511.5,485.5C 425.906,439.887 340.572,393.887 255.5,347.5C 170.208,393.481 84.8748,439.481 -0.5,485.5C -0.5,463.5 -0.5,441.5 -0.5,419.5C 84.8432,373.495 170.177,327.495 255.5,281.5C 340.697,327.437 426.03,373.437 511.5,419.5 Z"/>
                  </svg>
                  <p>
                    Published on <time datetime="{{ note.datePublished | htmlDateString }}">{{ note.datePublished | readableDate }}</time>
                  </p>
                </div>
              </div>
              {% endif %}
            </div>
        </section>
     </article> 
